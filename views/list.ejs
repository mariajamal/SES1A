<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Book Appointment</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">

<style>

.top {
    float: left;
}



</style>

<script>
    
       function displayDoctors(doctors) { // loops through the doctors array and sets the appropriate data to its spot in the doctors table
   // clearTable();
   console.log(doctors);
    let table = document.getElementById("listDoctors"); // look into attatching object into onClick... GOODNIGHT!
    let x = {
        0: 10
    };
    let b = JSON.stringify(x);

    for (let i = 0; i<doctors.length; i++){
        let doc = doctors[i];
        // let name = doctors[i].name);
        let mainDiv = document.getElementById("docList");
        // mainDiv.classList.add("row");
        // mainDiv.classList.add("equal");
        let divCard = document.createElement("DIV");
        divCard.classList.add("card");
        // divCard.classList.add("d-flex");
        // divCard.classList.add("col-sm-4");
        // divCard.classList.add("pb-3");
        let img = document.createElement("IMG");
        img.classList.add("card-img-top");
        img.src =  'doctor.png';
        let divBody = document.createElement("DIV");
        divBody.classList.add("card-body");
        var docName = document.createElement("H5");
        docName.classList.add("card-title");
        docName.innerHTML= doctors[i].name;
        let appointmentButton = document.createElement("BUTTON");
        appointmentButton.classList.add("btn");
        appointmentButton.classList.add("btn-primary");
        appointmentButton.innerHTML="Book Appointment";
        let messageButton = document.createElement("BUTTON");
        messageButton.classList.add("btn");
        messageButton.classList.add("btn-success");
        messageButton.innerHTML="Message Doctor";
        divBody.appendChild(docName);
        divBody.appendChild(appointmentButton);
        divBody.appendChild(messageButton);
        divCard.appendChild(img);
        divCard.appendChild(divBody);
        mainDiv.appendChild(divCard);
    }
}

    function getDoctors() {
        
        var url = "http://localhost:5000/users/doctors";
        fetch(url)
            .then(function (response) {
                return response.json();
            }).then(function (obj) {
                displayDoctors(obj);
            }).catch(function (error) {
                console.log('Fetching doctors error');
            })
    }

    

    window.onload = function() {
        let data ='<%- JSON.stringify(user) %>'; 
        let name = JSON.parse(data);
        console.log(name);
        
        getDoctors();    
    }
</script>
</head>

<body>
    <div class="container-fluid">
        <div class="row">
            <div class="card-deck" id="docList"></div>
        </div>
        
    </div>
    

        

    </div>
    
</body>
</html>